!function(){function e(e,t,n,a,r,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(a,r)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=document.createElement("style");r.innerHTML=".login-icon{cursor:pointer;font-size:xxx-large}.PersonalSetting[data-v-74c81509]{margin-top:20px}.PersonalSetting .demo-ruleForm[data-v-74c81509]{text-align:left}.PersonalSetting .set-title[data-v-74c81509]{text-align:left}.PersonalSetting .secure-item[data-v-74c81509]{width:100%;padding:20px;border-bottom:1px solid #f0f0f0;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.PersonalSetting .secure-item .secure-info[data-v-74c81509]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.PersonalSetting .secure-item .secure-info .secure-key[data-v-74c81509]{margin-bottom:4px;color:#000000d9;font-size:14px;line-height:1.6}.PersonalSetting .secure-item .secure-info .secure-value[data-v-74c81509]{color:#00000073;font-size:14px;line-height:1.6}.PersonalSetting .secure-item .opera-btn[data-v-74c81509]{color:#1890ff;cursor:pointer}.PersonalSetting .set-info[data-v-74c81509]{display:flex;flex-direction:row;justify-content:space-around;align-items:flex-start}.PersonalSetting .set-info .form-info[data-v-74c81509],.PersonalSetting .set-info .avatar[data-v-74c81509]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-end;margin-left:30px}.PersonalSetting .set-info .form-info .preview[data-v-74c81509],.PersonalSetting .set-info .avatar .preview[data-v-74c81509]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-right:20px}.PersonalSetting .set-info .form-info .preview img[data-v-74c81509],.PersonalSetting .set-info .avatar .preview img[data-v-74c81509]{width:100px;height:100px;border-radius:50%}.PersonalSetting .set-info .form-info .avatar-uploader .el-upload[data-v-74c81509]:hover,.PersonalSetting .set-info .avatar .avatar-uploader .el-upload[data-v-74c81509]:hover{border-color:#409eff}.PersonalSetting .set-info .form-info .avatar-uploader-icon[data-v-74c81509],.PersonalSetting .set-info .avatar .avatar-uploader-icon[data-v-74c81509]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.PersonalSetting .set-info .form-info .avatar[data-v-74c81509],.PersonalSetting .set-info .avatar .avatar[data-v-74c81509]{width:178px;height:178px;display:block}.PersonalSetting .info[data-v-74c81509]{text-align:left;padding-left:20px;margin-bottom:20px;font-size:12px}.PersonalSetting .card-header[data-v-74c81509]{display:flex;justify-content:space-between;align-items:center}.PersonalSetting .text[data-v-74c81509]{font-size:14px}.PersonalSetting .item[data-v-74c81509]{margin-bottom:18px}.PersonalSetting .box-card[data-v-74c81509]{width:100%}\n",document.head.appendChild(r),System.register(["./vendor-legacy.81140759.js","./qrcode.vue.esm-legacy.a001b002.js","./index-legacy.3c2ce67b.js","./index-legacy.0d0bd3c6.js","./request-legacy.0b16a8fb.js"],(function(t){"use strict";var a,r,o,i,l,c,s,u,f,d,p,g,v,m,h,b,y,k,x,w,S,P,j,_,q;return{setters:[function(e){a=e.d,r=e.y,o=e.A,i=e.k,l=e.e,c=e.c,s=e.s,u=e.q,f=e.g,d=e.O,p=e.m,g=e.K,v=e.v,m=e.I,h=e.h,b=e.r,y=e.b,k=e.E,x=e.p,w=e.f},function(e){S=e.q},function(e){P=e.r,j=e._},function(e){_=e.g,q=e.p},function(){}],execute:function(){var V=a({components:{qrcodeVue:S},setup:function(){var e=r({type:"",bind:{wx:!1,qq:!1},qrcode:"",token:"",qrScanVisible:!1,checkTokenIntval:-1,message:""}),t=function(t){return function(e){return P.get("/auth/mini/qrcode/".concat(e))}(t).then((function(t){var n=t.data;return e.qrcode=n.img||n.url,e.token=n.token,e.message="请扫描小程序码",Promise.resolve()}))},a=function(){var t;(t=e.token,P.get("/auth/mini/binding",{params:{token:t}})).then((function(t){var n=t.data;console.log(n),e.message="绑定成功！"}))},i=function n(r){console.log(encodeURIComponent(r)),function(e){return P.get("/auth/mini/login/check",{params:{token:e}})}(r).then((function(r){var o=r.data;switch(console.log(o),0!==o.result&&3!==o.result&&clearInterval(e.checkTokenIntval),o.result){case-2:case-1:t(e.type).then((function(){e.checkTokenIntval=setInterval(n,5e3,e.token)}));break;case 0:console.log("等待授权");break;case 1:e.token="",e.message="授权被拒绝";break;case 2:e.message="授权成功！正在绑定...",a();break;case 3:e.message="已扫描，请进行授权操作"}}))};return n(n({},o(e)),{},{scanQRCode:function(n){e.qrScanVisible=!0,e.type=n,e.message="正在获取小程序码",t(n).then((function(){e.checkTokenIntval=setInterval(i,5e3,e.token)}))},cancelScan:function(){e.qrScanVisible=!1,e.qrcode="",clearInterval(e.checkTokenIntval)},refreshQRCodeAction:function(){e.message="正在刷新小程序码",clearInterval(e.checkTokenIntval),t(e.type).then((function(){e.checkTokenIntval=setInterval(i,5e3,e.token)}))}})}}),O={key:0},C=["src"],F={class:"dialog-footer"},I=m("刷新"),U=m("取消");V.render=function(e,t,n,a,r,o){var m=i("el-col"),h=i("el-row"),b=i("qrcode-vue"),y=i("el-button"),k=i("el-dialog");return l(),c("div",null,[s(h,null,{default:u((function(){return[s(m,{span:12},{default:u((function(){return[f("i",{class:"ic ic-weixindenglu login-icon",style:d({color:e.bind.wx?"#1db308":"gray"}),onClick:t[0]||(t[0]=function(t){return e.scanQRCode("WX")})},null,4)]})),_:1}),s(m,{span:12},{default:u((function(){return[f("i",{class:"ic ic-qqdenglu login-icon",style:d({color:e.bind.qq?"#1277e3":"gray"}),onClick:t[1]||(t[1]=function(t){return e.scanQRCode("QQ")})},null,4)]})),_:1})]})),_:1}),s(k,{modelValue:e.qrScanVisible,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.qrScanVisible=t}),title:"请扫描小程序码"},{default:u((function(){return[e.qrcode&&e.qrcode.length>0?(l(),c("div",O,["WX"===e.type?(l(),c("img",{key:0,height:"300",width:"300",src:e.qrcode},null,8,C)):(l(),p(b,{key:1,size:300,value:e.qrcode},null,8,["value"]))])):g("",!0),f("h2",null,v(e.message),1)]})),footer:u((function(){return[f("div",F,[s(y,{type:"primary",onClick:e.refreshQRCodeAction},{default:u((function(){return[I]})),_:1},8,["onClick"]),s(y,{onClick:e.cancelScan},{default:u((function(){return[U]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue"])])};var R=t("default",a({name:"PersonalSetting",components:{MiniLogin:V},setup:function(){var t=h(),a=b("left"),i=b(),l=r({userSwitch:!1,sysSwitch:!0,taskSwitch:!0}),c=r({email:"",nickname:"",password:"",desc:"",mobile:"",avatar:"../../assets/avatar-default.jpg"}),s=b(),u=b(!1),f={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],nickname:{required:!0,message:"请输入昵称",trigger:["blur","change"]},desc:{required:!0,message:"请输入个人简介",trigger:["blur","change"]},mobile:{required:!0,validator:function(e,t,n){if(""===t)n(new Error("手机号码不可为空哦"));else{/^1[3-9]\d{9}$/.test(t)?n():n(new Error("请输入正确的手机号码"))}},trigger:["blur","change"]}};y((function(){_().then((function(e){var t=e.data.info;c.email=t.email,c.nickname=t.nickname,t.avatar&&(c.avatar=t.avatar)}))}));return n(n({handleBack:function(){t.go(-1)},tabPosition:a,settingFormRef:i,settingForm:c,submitForm:function(){i.value.validate(function(){var t,a=(t=regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.prev=1,u.value=!0,a=n({},c),e.next=6,q(a);case 6:r=e.sent,u.value=!1,!0===r.data.result?k.ElMessage({type:"success",message:"更新成功"}):k.ElMessage({type:"error",message:"更新失败"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var n=this,a=arguments;return new Promise((function(r,o){var i=t.apply(n,a);function l(t){e(i,r,o,l,c,"next",t)}function c(t){e(i,r,o,l,c,"throw",t)}l(void 0)}))});return function(e){return a.apply(this,arguments)}}())},resetForm:function(){i.value.resetFields()},handleAvatarSuccess:function(e,t){s.value=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){if(!/(gif|png|jpg|jpeg)$/i.test(e.type))return k.ElMessage({message:"上传头像图片只能是gif|png|jpg|jpeg 格式!",type:"warning"}),!1;var t=e.size/1024/1024<2;return t||k.ElMessage({type:"error",message:"上传头像图片大小不能超过 2MB!"}),t},rules:f,imageUrl:s},o(l)),{},{updateLoading:u})}})),E=function(e){return x("data-v-74c81509"),e=e(),w(),e},z={class:"PersonalSetting"},T={class:"grid-content bg-purple-dark"},A={class:"card-header"},M=E((function(){return f("i",{class:"el-icon-arrow-left"},null,-1)})),Q=m("返回 "),L=E((function(){return f("span",null,"个人设置",-1)})),D=E((function(){return f("div",null,null,-1)})),B=E((function(){return f("div",{class:"set-title"},[f("span",null,"基本设置")],-1)})),W={class:"set-info"},X={class:"form-info"},$=m("更新"),H=m("重置"),K={class:"avatar"},G=E((function(){return f("div",{class:"preview"},[f("span",null,"头像"),f("img",{src:j})],-1)})),J=E((function(){return f("i",{class:"el-icon-upload"},null,-1)})),N=m("更换头像 "),Y=E((function(){return f("div",{class:"set-title"},[f("span",null,"安全设置")],-1)})),Z=E((function(){return f("div",{class:"secure-item"},[f("div",{class:"secure-info"},[f("span",{class:"secure-key"},"绑定邮箱"),f("span",{class:"secure-value"},"已绑定邮箱：geek****@outlook.com")]),f("div",{class:"opera-btn"},[f("span",null,"修改")])],-1)})),ee=E((function(){return f("div",{class:"set-title"},[f("span",null,"新消息通知")],-1)})),te={class:"secure-item"},ne=E((function(){return f("div",{class:"secure-info"},[f("span",{class:"secure-key"},"账户密码"),f("span",{class:"secure-value"},"用户信息将以系统内部渠道通知")],-1)})),ae={class:"secure-item"},re=E((function(){return f("div",{class:"secure-info"},[f("span",{class:"secure-key"},"系统消息"),f("span",{class:"secure-value"},"系统消息将以系统内部渠道通知")],-1)})),oe={class:"secure-item"},ie=E((function(){return f("div",{class:"secure-info"},[f("span",{class:"secure-key"},"代办任务"),f("span",{class:"secure-value"},"代办任务将以系统内部渠道通知")],-1)})),le=E((function(){return f("div",{class:"set-title"},[f("span",null,"账号绑定")],-1)})),ce={style:{"margin-top":"3rem"}};R.render=function(e,t,n,a,r,o){var d=i("el-button"),p=i("el-input"),g=i("el-form-item"),v=i("el-form"),m=i("el-upload"),h=i("el-tab-pane"),b=i("el-switch"),y=i("el-tooltip"),k=i("mini-login"),x=i("el-tabs"),w=i("el-card"),S=i("el-col"),P=i("el-row");return l(),c("div",z,[s(P,null,{default:u((function(){return[s(S,{offset:1,span:22},{default:u((function(){return[f("div",T,[s(w,{class:"box-card"},{header:u((function(){return[f("div",A,[s(d,{class:"button",type:"text",onClick:e.handleBack},{default:u((function(){return[M,Q]})),_:1},8,["onClick"]),L,D])]})),default:u((function(){return[s(x,{"tab-position":e.tabPosition},{default:u((function(){return[s(h,{label:"基本设置"},{default:u((function(){return[B,f("div",W,[f("div",X,[s(v,{ref:"settingFormRef",model:e.settingForm,rules:e.rules,"label-width":"100px",class:"demo-ruleForm"},{default:u((function(){return[s(g,{label:"昵称",prop:"nickname"},{default:u((function(){return[s(p,{modelValue:e.settingForm.nickname,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.settingForm.nickname=t}),placeholder:"请输入昵称",maxlength:"10"},null,8,["modelValue"])]})),_:1}),s(g,{label:"邮箱",prop:"email"},{default:u((function(){return[s(p,{modelValue:e.settingForm.email,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.settingForm.email=t}),placeholder:"请输入邮箱"},null,8,["modelValue"])]})),_:1}),s(g,{label:"密码",prop:"password"},{default:u((function(){return[s(p,{modelValue:e.settingForm.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.settingForm.password=t}),placeholder:"密码"},null,8,["modelValue"])]})),_:1}),s(g,null,{default:u((function(){return[s(d,{type:"primary",loading:e.updateLoading,onClick:t[3]||(t[3]=function(t){return e.submitForm()})},{default:u((function(){return[$]})),_:1},8,["loading"]),s(d,{onClick:t[4]||(t[4]=function(t){return e.resetForm()})},{default:u((function(){return[H]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]),f("div",K,[G,s(m,{class:"avatar-uploader",action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload},{default:u((function(){return[s(d,{style:{"margin-left":"10px"},size:"small",type:"success"},{default:u((function(){return[J,N]})),_:1})]})),_:1},8,["on-success","before-upload"])])])]})),_:1}),s(h,{label:"安全设置"},{default:u((function(){return[Y,Z]})),_:1}),s(h,{label:"新消息通知"},{default:u((function(){return[ee,f("div",te,[ne,s(y,{content:"是否开启用户信息: ",placement:"top"},{default:u((function(){return[s(b,{modelValue:e.userSwitch,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.userSwitch=t}),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]})),_:1})]),f("div",ae,[re,s(y,{content:"是否开启系统消息: ",placement:"top"},{default:u((function(){return[s(b,{modelValue:e.sysSwitch,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.sysSwitch=t}),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]})),_:1})]),f("div",oe,[ie,s(y,{content:"是否开启代办任务消息: ",placement:"top"},{default:u((function(){return[s(b,{modelValue:e.taskSwitch,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.taskSwitch=t}),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]})),_:1})])]})),_:1}),s(h,{label:"账号绑定"},{default:u((function(){return[le,f("div",ce,[s(k)])]})),_:1})]})),_:1},8,["tab-position"])]})),_:1})])]})),_:1})]})),_:1})])},R.__scopeId="data-v-74c81509"}}}))}();
