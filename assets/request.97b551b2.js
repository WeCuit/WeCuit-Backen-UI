import{G as e,aP as s}from"./vendor.3f7b2887.js";const t=e.create({timeout:2e4});function a(e){return new Promise(((a,r)=>{t({timeout:void 0===e.timeout?1e4:e.timeout,url:e.url,method:e.method||"POST",headers:{"content-type":e.contentType?e.contentType:e.json?"application/json; charset=UTF-8":"application/x-www-form-urlencoded; charset=UTF-8"},params:e.params||"",data:e.data||"",responseType:e.responseType||"json"}).then((e=>{if("2"===`${e.status}`.charAt(0)){if("1"===e.data.code||"err_9999"===e.data.code)return s.ElMessage({type:"error",message:e.data.message}),void r(e.data);a(e.data)}else s.ElMessage({type:"error",message:e.data.message}),r(e.data)})).catch((e=>{s.ElMessage({type:"error",message:e.message}),r(e)}))}))}t.defaults.withCredentials=!0,t.defaults.headers["X-Requested-With"]="XMLHttpRequest",t.defaults.headers.post["Content-Type"]="application/json",t.interceptors.request.use((e=>(sessionStorage.getItem("accessToken")&&(e.headers.Authorization=`Bearer ${sessionStorage.getItem("accessToken")}`),e)),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>{if(e.response&&e.response.data){const t=e.response.status,a=e.response.data.message;s.ElMessage.error(`Code: ${t}, Message: ${a}`)}else s.ElMessage.error(`${e}`);return Promise.reject(e)}));export{a as r};
